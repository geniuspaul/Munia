services:
  - type: web
    name: munia-backend
    runtime: python
    buildCommand: |
      pip install -r requirements.txt
      python manage.py collectstatic --noinput
      python manage.py migrate
    startCommand: gunicorn Munia.wsgi:application
    env: python
    plan: free  # or "starter", "standard" etc depending on your Render plan
    branch: main  # or the branch you're deploying from
    region: oregon  # or whatever Render region you prefer
    autoDeploy: true

    envVars:
      - key: DEBUG
        value: "False"
      - key: DJANGO_SETTINGS_MODULE
        value: Munia.settings
      - key: SECRET_KEY
        sync: false  # Provide this securely via the Render dashboard
      - key: SENDGRID_API_KEY
        sync: false  # Provide this securely via the Render dashboard
